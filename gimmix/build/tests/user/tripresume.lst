                   # 1 "user/tripresume.mms"
                   # 1 "<built-in>"
                   # 1 "<command-line>"
                   # 1 "user/tripresume.mms"
                   %
                   % tripresume.mms -- tests trip
                   %
                   
                     LOC #0
                     % forced trip
 ...000: f2ffxxxx    PUSHJ 255,HTrip
 ...004: f60400ff    PUT rJ,$255
 ...008: feff0000    GET $255,rB
 ...00c: f9000000    RESUME 0
                   
                     % #10 (div by zero)
 ...010: f2ffxxxx    PUSHJ 255,HDiv
 ...014: f60400ff    PUT rJ,$255
 ...018: feff0000    GET $255,rB
 ...01c: f9000000    RESUME 0
                   
                     % #20 (integer overflow)
 ...020: f2ffxxxx    PUSHJ 255,HIOver
 ...024: f60400ff    PUT rJ,$255
 ...028: feff0000    GET $255,rB
 ...02c: f9000000    RESUME 0
                   
                     LOC #50
                     % #50 (float overflow)
 ...050: f2ffxxxx    PUSHJ 255,FLOver
 ...054: f60400ff    PUT rJ,$255
 ...058: feff0000    GET $255,rB
 ...05c: f9000000    RESUME 0
                   
                     % #60 (float underflow)
 ...060: f2ffxxxx    PUSHJ 255,FLUnder
 ...064: f60400ff    PUT rJ,$255
 ...068: feff0000    GET $255,rB
 ...06c: f9000000    RESUME 0
                   
                     LOC #1000
                   
                     % test forced trip
0000000000001000:  Main PUT rG,64
 ...000: f7130040
 ...004: e3400000    SET $64,0 % put some values into the stuff that is affected by TRIP 1,2,3
 ...008: e3480000    SET $72,0
 ...00c: e3ff1234    SET $255,#1234
 ...010: e3020015    SET $2,#15
 ...014: e3030016    SET $3,#16
 ...018: f7040011    PUT rJ,#11
 ...01c: ff010203    TRIP 1,2,3
 ...020: e3480001    SET $72,1
                   
                     % enable arithmetic exceptions
 ...024: fe040015    GET $4,rA
 ...028: eb04ff00    ORL $4,#FF00
 ...02c: f6150004    PUT rA,$4
                   
                     % test div by zero
 ...030: e3510000    SET $81,0
 ...034: e3060000    SET $6,0
 ...038: e35b000c    SET $91,12
 ...03c: 1c5b0206    DIV $91,$2,$6 % raise div by zero exception
 ...040: e3510001    SET $81,1
                   
                     % test int overflow of add
 ...044: e35a0000    SET $90,0
 ...048: e3050001    SET $5,1
 ...04c: 3b05053f    SLU $5,$5,63 % $5 = #80...0
 ...050: c2050605    ORN $5,$6,$5 % $5 = ~$5
 ...054: e35c0011    SET $92,#11
 ...058: 205c0505    ADD $92,$5,$5 % raise int overflow ex
 ...05c: e35a0001    SET $90,1
                   
                     % test float overflow
 ...060: e05d7fef    SETH $93,#7FEF
 ...064: e95dffff    ORMH $93,#FFFF
 ...068: ea5dffff    ORML $93,#FFFF
 ...06c: eb5dffff    ORL $93,#FFFF
 ...070: 045d5d5d    FADD $93,$93,$93
 ...074: e3650001    SET $101,1
                   
                     % test float underflow
 ...078: e3660001    SETL $102,#0001
 ...07c: e3670002    SETL $103,#0002
 ...080: 06676667    FSUB $103,$102,$103
 ...084: e36e0001    SET $110,1
                   
 ...088: 00000000    TRAP 0
                   
 ...08c: e3400001  HTrip SET $64,1 % just to indicate we got here..
 ...090: fe410019    GET $65,rX % 80000000 + instr
 ...094: fe42001a    GET $66,rY % $Y
 ...098: fe43001b    GET $67,rZ % $Z
 ...09c: fe440018    GET $68,rW % next instr
 ...0a0: fe450000    GET $69,rB % old $255
 ...0a4: 2146ff00    ADD $70,$255,0 % old rJ
 ...0a8: fe470015    GET $71,rA
 ...0ac: f8000000    POP 0
                   
 ...0b0: e3490001  HDiv SET $73,1 % just to indicate we got here..
 ...0b4: fe4a0019    GET $74,rX % 80000000 + instr
 ...0b8: fe4b001a    GET $75,rY % $Y
 ...0bc: fe4c001b    GET $76,rZ % $Z
 ...0c0: fe4d0018    GET $77,rW % next instr
 ...0c4: fe4e0000    GET $78,rB % old $255
 ...0c8: 214fff00    ADD $79,$255,0 % old rJ
 ...0cc: fe500015    GET $80,rA
 ...0d0: f8000000    POP 0
                   
 ...0d4: e3520001  HIOver SET $82,1 % just to indicate we got here..
 ...0d8: fe530019    GET $83,rX % 80000000 + instr
 ...0dc: fe54001a    GET $84,rY % $Y
 ...0e0: fe55001b    GET $85,rZ % $Z
 ...0e4: fe560018    GET $86,rW % next instr
 ...0e8: fe570000    GET $87,rB % old $255
 ...0ec: 2158ff00    ADD $88,$255,0 % old rJ
 ...0f0: fe590015    GET $89,rA
 ...0f4: f8000000    POP 0
                   
 ...0f8: e35d0001  FLOver SET $93,1 % just to indicate we got here..
 ...0fc: fe5e0019    GET $94,rX % 80000000 + instr
 ...100: fe5f001a    GET $95,rY % $Y
 ...104: fe60001b    GET $96,rZ % $Z
 ...108: fe610018    GET $97,rW % next instr
 ...10c: fe620000    GET $98,rB % old $255
 ...110: 2163ff00    ADD $99,$255,0 % old rJ
 ...114: fe640015    GET $100,rA
 ...118: f8000000    POP 0
                   
 ...11c: e3660001  FLUnder SET $102,1 % just to indicate we got here..
 ...120: fe670019    GET $103,rX % 80000000 + instr
 ...124: fe68001a    GET $104,rY % $Y
 ...128: fe69001b    GET $105,rZ % $Z
 ...12c: fe6a0018    GET $106,rW % next instr
 ...130: fe6b0000    GET $107,rB % old $255
 ...134: 216cff00    ADD $108,$255,0 % old rJ
 ...138: fe6d0015    GET $109,rA
 ...13c: f8000000    POP 0

Symbol table:
 FLOver = #00000000000010f8 (5)
 FLUnder = #000000000000111c (6)
 HDiv = #00000000000010b0 (3)
 HIOver = #00000000000010d4 (4)
 HTrip = #000000000000108c (2)
 Main = #0000000000001000 (1)

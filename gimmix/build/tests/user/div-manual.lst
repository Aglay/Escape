                   # 1 "user/div-manual.mms"
                   # 1 "<built-in>"
                   # 1 "<command-line>"
                   # 1 "user/div-manual.mms"
                   %
                   % div.mms -- tests div-instructions
                   %
                     LOC #1000
                   
0000000000001000:  Main NOR $2,$2,$2 % = -1
 ...000: c4020202
 ...004: c4030303    NOR $3,$3,$3
 ...008: ef030001    ANDNL $3,#0001 % = -2
 ...00c: c4040404    NOR $4,$4,$4
 ...010: ef040002    ANDNL $4,#0002 % = -3
 ...014: c4050505    NOR $5,$5,$5
 ...018: ef050007    ANDNL $5,#0007 % = -8
 ...01c: e3060000    SET $6,0
 ...020: e3070001    SET $7,1
 ...024: e3080005    SET $8,5
 ...028: e309000a    SET $9,10
                   
                     % test divu(i)
 ...02c: 1e0a0707    DIVU $10,$7,$7 % 1 / 1
 ...030: fe0b0006    GET $11,rR
                   
 ...034: 1e0c0908    DIVU $12,$9,$8 % 10 / 5
 ...038: fe0d0006    GET $13,rR
                   
 ...03c: 1e0e0809    DIVU $14,$8,$9 % 5 / 10
 ...040: fe0f0006    GET $15,rR
                   
 ...044: 1f100903    DIVU $16,$9,3 % 10 / 3
 ...048: fe110006    GET $17,rR
                   
 ...04c: 1f120210    DIVU $18,$2,16 % FF..FF / 16
 ...050: fe130006    GET $19,rR
                   
 ...054: f6010002    PUT rD,$2
 ...058: 1f140210    DIVU $20,$2,16 % FF..FF FF..FF / 16
 ...05c: fe150006    GET $21,rR % since rD >= 16, the result is FF..FF (rD) and the remainder
                           % FF..FF ($2)
                   
 ...060: 1b160210    MULU $22,$2,16 % FF..FF * 16
 ...064: fe170003    GET $23,rH
 ...068: f6010017    PUT rD,$23
 ...06c: 1f181610    DIVU $24,$22,16 % F FF..FF / 16
 ...070: fe190006    GET $25,rR
                   
                     % test div(i)
 ...074: 1c1a0707    DIV $26,$7,$7 % 1 / 1 => 1:0
 ...078: fe1b0006    GET $27,rR
                   
 ...07c: 1c1c0908    DIV $28,$9,$8 % 10 / 5 => 2:0
 ...080: fe1d0006    GET $29,rR
                   
 ...084: 1c1e0809    DIV $30,$8,$9 % 5 / 10 => 0:5
 ...088: fe1f0006    GET $31,rR
                   
 ...08c: 1d200903    DIV $32,$9,3 % 10 / 3 => 3:1 ((10 - 1) % 3 == 0)
 ...090: fe210006    GET $33,rR
                   
 ...094: 1c220904    DIV $34,$9,$4 % 10 / -3 => -4:-2 ((10 - -2) % 3 == 0)
 ...098: fe230006    GET $35,rR
                   
 ...09c: c4242424    NOR $36,$36,$36
 ...0a0: ef240009    ANDNL $36,#0009 % = -10
 ...0a4: 1d252403    DIV $37,$36,3 % -10 / 3 => -4:2 ((-10 - 2) % 3 == 0)
 ...0a8: fe260006    GET $38,rR
                   
 ...0ac: 1c272404    DIV $39,$36,$4 % -10 / -3 => 3:-1 ((-10 - -1) % 3 == 0)
 ...0b0: fe280006    GET $40,rR
                   
 ...0b4: 1d292405    DIV $41,$36,5 % -10 / 5 => -2:0
 ...0b8: fe2a0006    GET $42,rR
                   
 ...0bc: c42b2b2b    NOR $43,$43,$43
 ...0c0: ef2b0004    ANDNL $43,#0004 % = -5
 ...0c4: 1c2c092b    DIV $44,$9,$43 % 10 / -5 => -2:0
 ...0c8: fe2d0006    GET $45,rR
                   
 ...0cc: 1c2e242b    DIV $46,$36,$43 % -10 / -5 => 2:0
 ...0d0: fe2f0006    GET $47,rR
                   
                     % test div by zero
 ...0d4: fe300015    GET $48,rA % first, ensure that no arith-exception occurred yet
 ...0d8: e3310001    SET $49,1
 ...0dc: 1c310906    DIV $49,$9,$6 % 10 / 0 => 0:10 + ex
 ...0e0: fe320006    GET $50,rR
 ...0e4: fe330015    GET $51,rA
 ...0e8: f6150006    PUT rA,$6 % clear rA
                   
                     % test big numbers
 ...0ec: c4343434    NOR $52,$52,$52
 ...0f0: ec348000    ANDNH $52,#8000 % = 2^63 - 1
 ...0f4: 1c353434    DIV $53,$52,$52 % (2^63 - 1) / (2^63 - 1) = 1:0
 ...0f8: fe360006    GET $54,rR
                   
                     % test div-overflow
 ...0fc: e0378000    SETH $55,#8000 % = -2^63
 ...100: 1c383702    DIV $56,$55,$2 % -2^63 / -1 = -2^63:0 + ex
 ...104: fe390006    GET $57,rR
 ...108: fe3a0015    GET $58,rA
                   
 ...10c: 00000000    TRAP 0

Symbol table:
 Main = #0000000000001000 (1)

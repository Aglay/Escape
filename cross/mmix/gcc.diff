diff -rcN src/gcc-org/config.sub src/gcc/config.sub
*** src/gcc-org/config.sub	2010-05-25 15:22:07.000000000 +0200
--- src/gcc/config.sub	2012-12-16 12:25:49.380396480 +0100
***************
*** 1297,1303 ****
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
  	      | -sym* | -kopensolaris* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
! 	      | -aos* | -aros* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
--- 1297,1303 ----
  	      | -hpux* | -unos* | -osf* | -luna* | -dgux* | -auroraux* | -solaris* \
  	      | -sym* | -kopensolaris* \
  	      | -amigaos* | -amigados* | -msdos* | -newsos* | -unicos* | -aof* \
! 	      | -aos* | -aros* | -escape* \
  	      | -nindy* | -vxsim* | -vxworks* | -ebmon* | -hms* | -mvs* \
  	      | -clix* | -riscos* | -uniplus* | -iris* | -rtu* | -xenix* \
  	      | -hiux* | -386bsd* | -knetbsd* | -mirbsd* | -netbsd* \
diff -rcN src/gcc-org/gcc/config/escape.h src/gcc/gcc/config/escape.h
*** src/gcc-org/gcc/config/escape.h	1970-01-01 01:00:00.000000000 +0100
--- src/gcc/gcc/config/escape.h	2012-12-16 12:26:27.368397345 +0100
***************
*** 0 ****
--- 1,36 ----
+   #undef   STARTFILE_SPEC
+   #define STARTFILE_SPEC "%{shared|pie:crt0S.o%s;:crt0.o%s} %{shared:crt1S.o%s;:crt1.o%s} %{shared|pie:crtbeginS.o%s;:crtbegin.o%s}"
+   
+   #undef   ENDFILE_SPEC
+   #define ENDFILE_SPEC "%{shared|pie:crtendS.o%s;:crtend.o%s} %{shared:crtnS.o%s;:crtn.o%s}"
+   
+   #undef LINK_SPEC
+   #define LINK_SPEC ""
+   
+   #undef TARGET_OS_CPP_BUILTINS
+   #define TARGET_OS_CPP_BUILTINS()      \
+     do {                                \
+       /* to force a strcmp for typeinfo-compares */ \
+       builtin_define ("__GXX_MERGED_TYPEINFO_NAMES=0"); \
+       builtin_define ("__GXX_TYPEINFO_EQUALITY_INLINE=0"); \
+       builtin_define ("__mmix__");				\
+       builtin_define ("__MMIX__");				\
+       builtin_define_std ("escape");      \
+       builtin_define_std ("unix");      \
+       builtin_assert ("system=escape");   \
+       builtin_assert ("system=unix");   \
+     } while(0);
+   
+   #undef LINK_GCC_C_SEQUENCE_SPEC
+   #define LINK_GCC_C_SEQUENCE_SPEC \
+     "%{static:--start-group} %G %L %{static:--end-group}%{!static:%G}"
+   
+   /* Use --as-needed -lgcc_s for eh support.  */
+   #ifdef HAVE_LD_AS_NEEDED
+   #define USE_LD_AS_NEEDED 1
+   #endif
+   
+   #undef TARGET_VERSION
+   #define TARGET_VERSION fprintf(stderr, " (mmix escape)");
+ 
+   #define NO_IMPLICIT_EXTERN_C
diff -rcN src/gcc-org/gcc/config.gcc src/gcc/gcc/config.gcc
*** src/gcc-org/gcc/config.gcc	2011-07-22 18:44:50.000000000 +0200
--- src/gcc/gcc/config.gcc	2012-12-16 12:27:12.864398381 +0100
***************
*** 2038,2043 ****
--- 2038,2049 ----
  	need_64bit_hwint=yes
  	use_gcc_stdint=wrap
  	;;
+ mmix-*-escape)
+ 	tm_file="${tm_file} escape.h"
+ 	need_64bit_hwint=yes
+ 	use_gcc_stdint=wrap
+ 	default_use_cxa_atexit=yes
+ 	;;
  mn10300-*-*)
  	tm_file="dbxelf.h elfos.h newlib-stdint.h ${tm_file}"
  	if test x$stabs = xyes
diff -rcN src/gcc-org/gcc/dwarf2out.c src/gcc/gcc/dwarf2out.c
*** src/gcc-org/gcc/dwarf2out.c	2012-02-16 09:50:02.000000000 +0100
--- src/gcc/gcc/dwarf2out.c	2012-12-16 12:29:21.844401320 +0100
***************
*** 22169,22177 ****
  	      fprintf (asm_out_file, " is_stmt %d", is_stmt ? 1 : 0);
  	      last_is_stmt = is_stmt;
  	    }
! 	  if (SUPPORTS_DISCRIMINATOR && discriminator != 0
  	      && (dwarf_version >= 4 || !dwarf_strict))
! 	    fprintf (asm_out_file, " discriminator %d", discriminator);
  	  fputc ('\n', asm_out_file);
  
  	  /* Indicate that line number info exists.  */
--- 22169,22177 ----
  	      fprintf (asm_out_file, " is_stmt %d", is_stmt ? 1 : 0);
  	      last_is_stmt = is_stmt;
  	    }
! 	  /*if (SUPPORTS_DISCRIMINATOR && discriminator != 0
  	      && (dwarf_version >= 4 || !dwarf_strict))
! 	    fprintf (asm_out_file, " discriminator %d", discriminator);*/
  	  fputc ('\n', asm_out_file);
  
  	  /* Indicate that line number info exists.  */
diff -rcN src/gcc-org/libgcc/config.host src/gcc/libgcc/config.host
*** src/gcc-org/libgcc/config.host	2011-11-23 23:15:54.000000000 +0100
--- src/gcc/libgcc/config.host	2012-12-16 12:29:47.384401901 +0100
***************
*** 440,445 ****
--- 440,449 ----
  	extra_parts="crti.o crtn.o crtbegin.o crtend.o"
  	tmake_file="${tmake_file} ${cpu_type}/t-${cpu_type}"
  	;;
+ mmix-*-escape)
+ 	extra_parts="crti.o crtn.o crtbegin.o crtend.o"
+ 	tmake_file="${tmake_file} ${cpu_type}/t-${cpu_type}"
+ 	;;
  mn10300-*-*)
  	;;
  moxie-*-*)
diff -rcN src/gcc-org/libstdc++-v3/libsupc++/eh_term_handler.cc src/gcc/libstdc++-v3/libsupc++/eh_term_handler.cc
*** src/gcc-org/libstdc++-v3/libsupc++/eh_term_handler.cc	2009-04-09 17:00:19.000000000 +0200
--- src/gcc/libstdc++-v3/libsupc++/eh_term_handler.cc	2012-12-16 12:30:06.496402336 +0100
***************
*** 38,44 ****
  
  /* The current installed user handler.  */
  std::terminate_handler __cxxabiv1::__terminate_handler =
! #if _GLIBCXX_HOSTED
  	__gnu_cxx::__verbose_terminate_handler;
  #else
  	std::abort;
--- 38,44 ----
  
  /* The current installed user handler.  */
  std::terminate_handler __cxxabiv1::__terminate_handler =
! #if 1 //_GLIBCXX_HOSTED
  	__gnu_cxx::__verbose_terminate_handler;
  #else
  	std::abort;
diff -rcN src/gcc-org/libstdc++-v3/libsupc++/vterminate.cc src/gcc/libstdc++-v3/libsupc++/vterminate.cc
*** src/gcc-org/libstdc++-v3/libsupc++/vterminate.cc	2011-01-30 23:39:36.000000000 +0100
--- src/gcc/libstdc++-v3/libsupc++/vterminate.cc	2012-12-16 12:30:34.748402980 +0100
***************
*** 24,35 ****
  
  #include <bits/c++config.h>
  
! #if _GLIBCXX_HOSTED
  #include <cstdlib>
  #include <exception>
  #include <bits/exception_defines.h>
  #include <cxxabi.h>
! # include <cstdio>
  
  using namespace std;
  using namespace abi;
--- 24,40 ----
  
  #include <bits/c++config.h>
  
! #if 1 //_GLIBCXX_HOSTED
  #include <cstdlib>
  #include <exception>
  #include <bits/exception_defines.h>
  #include <cxxabi.h>
! // don't include cstdio here because thats too much trouble
! //# include <cstdio>
! extern "C" void abort(void);
! extern "C" int fputs(const char*,void*);
! extern "C" void *free(void*);
! extern void *stderr;
  
  using namespace std;
  using namespace abi;
***************
*** 62,68 ****
  	  int status = -1;
  	  char *dem = 0;
  	  
! 	  dem = __cxa_demangle(name, 0, 0, &status);
  
  	  fputs("terminate called after throwing an instance of '", stderr);
  	  if (status == 0)
--- 67,73 ----
  	  int status = -1;
  	  char *dem = 0;
  	  
! 	  //dem = __cxa_demangle(name, 0, 0, &status);
  
  	  fputs("terminate called after throwing an instance of '", stderr);
  	  if (status == 0)
diff -rcN src/gcc-org/gcc/gthr-posix.h src/gcc/gcc/gthr-posix.h 
*** src/gcc-org/gcc/gthr-posix.h	2012-05-12 11:53:05.000000000 +0200
--- src/gcc/gcc/gthr-posix.h	2012-05-12 11:53:34.000000000 +0200
***************
*** 40,45 ****
--- 40,46 ----
  
  #include <pthread.h>
  #include <unistd.h>
+ #include <sched.h>
  
  typedef pthread_t __gthread_t;
  typedef pthread_key_t __gthread_key_t;
